<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>فرفش مع الأسطورة</title>
    <style>
        body { margin: 0; background: #02050f; color: #00ff00; font-family: 'Courier New', Tahoma, sans-serif; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background-image: radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0)), radial-gradient(2px 2px at 40px 70px, #fff, rgba(0,0,0,0)); background-size: 300px 300px; animation: move-it 100s linear infinite; }
        @keyframes move-it { from { background-position: 0 0; } to { background-position: 1000px 1000px; } }
        .header-area { text-align: center; padding: 5px; border-bottom: 2px solid #00ff00; background: rgba(0,0,0,0.8); }
        .main-title { font-size: 16px; font-weight: bold; text-shadow: 2px 2px #000; display: block; margin-top: 15px; animation: rainbow-text 3s linear infinite, shake 0.5s ease-in-out infinite; }
        @keyframes rainbow-text { 0% { color: #ff0000; } 20% { color: #ffff00; } 40% { color: #00ff00; } 60% { color: #00ffff; } 80% { color: #0000ff; } 100% { color: #ff00ff; } }
        @keyframes shake { 0%, 100% { transform: translate(0,0); } 25% { transform: translate(1px, 1px); } 50% { transform: translate(-1px, -1px); } 75% { transform: translate(1px, -1px); } }
        .container { display: flex; flex-grow: 1; height: calc(100vh - 80px); }
        .sidebar { width: 110px; background: rgba(0,0,0,0.9); border-left: 2px solid #00ff00; display: flex; flex-direction: column; padding: 5px; gap: 5px; text-align: center; z-index: 10; }
        .sidebar button { background: #000; border: 2px outset #00ff00; color: #00ff00; padding: 8px 2px; font-size: 11px; cursor: pointer; font-weight: bold; }
        .content-area { flex-grow: 1; position: relative; display: flex; flex-direction: column; align-items: center; overflow: hidden; padding: 10px; }
        .section { display: none; width: 100%; height: 100%; flex-direction: column; align-items: center; }
        .active-section { display: flex; }
        .choice-box { width: 90%; padding: 15px; margin: 5px; text-align: center; font-size: 16px; font-weight: bold; border: 3px double; cursor: pointer; }
        .blue-choice { background: #000080; border-color: #00f; color: #fff; }
        .red-choice { background: #800000; border-color: #f00; color: #fff; }
        .joke-display { width: 90%; padding: 15px; border: 2px dashed #ffff00; color: #ffff00; font-size: 17px; text-align: center; min-height: 80px; background: rgba(0,0,0,0.7); margin-top: 10px; }
        #paint-wrap { width: 95%; height: 60%; background: #fff; border: 2px solid #00ff00; position: relative; }
        canvas#canv { width: 100%; height: 100%; touch-action: none; background: #fff; }
        .paint-tools { background: #c0c0c0; display: flex; flex-wrap: wrap; gap: 5px; padding: 5px; justify-content: center; width: 95%; border: 1px solid #000; }
        .paint-tools button { color: #000; font-size: 10px; padding: 5px; cursor: pointer; }
        #pacman-canvas { background: #000; border: 2px solid #00f; }
        .pac-controls { display: grid; grid-template-columns: repeat(3, 45px); gap: 5px; margin-top: 10px; }
        .pac-btn { width: 45px; height: 45px; background: #333; color: #fff; border: 2px solid #00ff00; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .marquee-container { position: fixed; bottom: 0; width: 100%; background: #000080; color: #fff; white-space: nowrap; overflow: hidden; padding: 5px 0; border-top: 2px solid #00ff00; }
        .marquee-text { display: inline-block; animation: marquee-anim 20s linear infinite; }
        @keyframes marquee-anim { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
    </style>
</head>
<body>
    <div class="stars"></div>
    <div class="header-area"></div>
    <div class="container">
        <div class="sidebar">
            <div style="font-size:10px; color:#fff; border-bottom:1px solid #0f0; margin-bottom:5px;">قائمة الأسطورة</div>
            <button onclick="show('home')">الرئيسية</button>
            <button onclick="show('q-sec')">لو خيروك</button>
            <button onclick="show('joke-sec')">النكت</button>
            <button onclick="show('pac-sec')">باك مان</button>
            <button onclick="show('paint-sec')">الرسام</button>
            <button onclick="show('forum-sec')">منتدى لايف</button>
            <div class="main-title">فرفش مع الأسطورة</div>
        </div>

        <div class="content-area">
            <div id="home" class="section active-section"><h2>أهلاً سالم</h2><p>كل الألعاب والدردشة جاهزة لك!</p></div>
            
            <div id="q-sec" class="section">
                <div id="q-blue" class="choice-box blue-choice" onclick="nextQ()">تطير بس تمشي بطيء</div>
                <div style="color:#fff">أو</div>
                <div id="q-red" class="choice-box red-choice" onclick="nextQ()">تختفي بس صوتك عالي</div>
            </div>

            <div id="joke-sec" class="section">
                <div id="joke-box" class="joke-display">اضغط التالي لتضحك</div>
                <button onclick="nextJ()" style="background:#0f0; padding:10px; margin-top:10px; font-weight:bold;">النكتة التالية</button>
            </div>

            <div id="pac-sec" class="section">
                <div style="color:yellow; margin-bottom:5px;">النقاط: <span id="pac-score">0</span></div>
                <canvas id="pacman-canvas" width="250" height="250"></canvas>
                <div class="pac-controls">
                    <div></div><div class="pac-btn" onclick="setPacDir('up')">↑</div><div></div>
                    <div class="pac-btn" onclick="setPacDir('left')">←</div><div></div><div class="pac-btn" onclick="setPacDir('right')">→</div>
                    <div></div><div class="pac-btn" onclick="setPacDir('down')">↓</div><div></div>
                </div>
            </div>

            <div id="paint-sec" class="section">
                <div id="paint-wrap"><canvas id="canv"></canvas></div>
                <div class="paint-tools">
                    <button onclick="setTool('pen')">قلم</button>
                    <button onclick="setTool('eraser')">محاية</button>
                    <button onclick="clearC()">مسح</button>
                    <input type="color" id="p-col" onchange="color=this.value" style="width:30px">
                </div>
            </div>

            <div id="forum-sec" class="section">
                <iframe src="https://www5.cbox.ws/box/?boxid=961537&boxtag=R2z6Bk" width="100%" height="100%" allowtransparency="yes" frameborder="0" scrolling="auto"></iframe>
            </div>
        </div>
    </div>

    <div class="marquee-container"><div class="marquee-text">** موقع فرفش الأسطورة - فرفش يا بعد حيي - أهلاً بك يا سالم ***</div></div>

    <script>
        function show(id) {
            var sections = document.getElementsByClassName('section');
            for (var i = 0; i < sections.length; i++) { sections[i].classList.remove('active-section'); }
            document.getElementById(id).classList.add('active-section');
            if (id === 'paint-sec') setTimeout(initCanv, 100);
            if (id === 'pac-sec') initPacman(); else if(typeof pacInt !== 'undefined') clearInterval(pacInt);
        }

        const qs = [
            {a:"تطير بس تمشي بطيء جداً", b:"تختفي بس صوتك عالي وفاضحك"},
            {a:"تاكل صرصور مقلي ومقرمش", b:"تشرب بنزين بارد مع ثلج"},
            {a:"تكون عبقري بس فقير وشحات", b:"تكون غبي جداً بس عندك مليارات"},
            {a:"ترجع للماضي وتغير كل أغلاطك", b:"تروح للمستقبل وتشوف وش بيصير لك"},
            {a:"تكلم الحيوانات وتفهم عليهم", b:"تتحدث كل لغات البشر بطلاقة"},
            {a:"تنام 20 ساعة وتصحى تعبان", b:"تنام ساعتين بس وتكون نشيط"},
            {a:"تسمع أفكار الناس اللي حولك", b:"تتحكم في الوقت وتوقفه متى ما تبي"}
        ];

        const js = [
            "محشش سألوه ايش اصعب شي بالحياة؟ قال انك تحدد السكسوكة وانت تاكل علك!",
            "غبي رمى جواله من البلكونة ولقاه مكسور.. قال غريبة مع اني حاطه وضع طيران!",
            "مدرس سأل طالب: الثعلب يولد ولا يبيض؟ قال: الثعلب مكار توقع منه أي شي!",
            "واحد سأل محشش: شو اسماء اخوانك؟ قال: كلهم محمد إلا خالد اسمه فيصل!",
            "محشش شاف إشارة ممنوع الوقوف.. قام انبطح بالشارع!",
            "بخيل احترق بيته، اتصل بالمطافي رنة وحدة وقفل عشان ما يصرف!"
        ];

        let qI=0, jI=0;
        function nextQ(){ qI=(qI+1)%qs.length; document.getElementById('q-blue').innerText=qs[qI].a; document.getElementById('q-red').innerText=qs[qI].b; }
        function nextJ(){ jI=(jI+1)%js.length; document.getElementById('joke-box').innerText=js[jI]; }

        // الرسام المعدل
        let canv=document.getElementById('canv'), ctx=canv.getContext('2d'), drawing=false, tool='pen', color='#000';
        function initCanv(){ 
            let box = canv.parentElement; canv.width=box.clientWidth; canv.height=box.clientHeight; 
            ctx.fillStyle="#fff"; ctx.fillRect(0,0,canv.width,canv.height); ctx.lineCap='round'; ctx.lineWidth=3;
        }
        function getPos(e){ 
            let rect = canv.getBoundingClientRect(); 
            let cx = e.touches ? e.touches[0].clientX : e.clientX;
            let cy = e.touches ? e.touches[0].clientY : e.clientY;
            return { x: cx - rect.left, y: cy - rect.top }; 
        }
        canv.onmousedown = canv.ontouchstart = (e) => { drawing=true; ctx.beginPath(); let p=getPos(e); ctx.moveTo(p.x, p.y); if(e.touches) e.preventDefault(); };
        canv.onmousemove = canv.ontouchmove = (e) => { if(!drawing) return; let p=getPos(e); ctx.strokeStyle=(tool=='eraser'?'#fff':color); ctx.lineTo(p.x, p.y); ctx.stroke(); if(e.touches) e.preventDefault(); };
        window.onmouseup = window.ontouchend = () => drawing=false;
        function setTool(t){ tool=t; } function clearC(){ ctx.fillStyle="#fff"; ctx.fillRect(0,0,canv.width,canv.height); }

        // باك مان المعدل
        let pc=document.getElementById('pacman-canvas'), pctx=pc.getContext('2d'), pacInt, px, py, pdir;
        function initPacman(){ px=125; py=125; pdir='stop'; if(pacInt) clearInterval(pacInt); pacInt=setInterval(upPac, 40); }
        function setPacDir(d){ pdir=d; }
        function upPac(){ 
            pctx.fillStyle="#000"; pctx.fillRect(0,0,250,250); 
            if(pdir=='right') px+=3; if(pdir=='left') px-=3; if(pdir=='up') py-=3; if(pdir=='down') py+=3;
            if(px>250) px=0; if(px<0) px=250; if(py>250) py=0; if(py<0) py=250;
            pctx.fillStyle="yellow"; pctx.beginPath(); pctx.arc(px, py, 12, 0.2*Math.PI, 1.8*Math.PI); pctx.lineTo(px,py); pctx.fill(); 
        }
    </script>
</body>
</html>
