<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÙØ±ÙØ´ Ù…Ø¹ Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</title>
    <style>
        body { margin: 0; background: #02050f; color: #00ff00; font-family: 'Courier New', Tahoma, sans-serif; overflow: hidden; height: 100vh; display: flex; flex-direction: column; position: relative; }
        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background-image: radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0)), radial-gradient(2px 2px at 40px 70px, #fff, rgba(0,0,0,0)); background-size: 300px 300px; animation: move-it 100s linear infinite; }
        @keyframes move-it { from { background-position: 0 0; } to { background-position: 1000px 1000px; } }
        .header-area { text-align: center; padding: 5px; border-bottom: 2px solid #00ff00; background: rgba(0,0,0,0.8); min-height: 5px; }
        .main-title { font-size: 16px; font-weight: bold; text-shadow: 2px 2px #000; display: block; margin-top: 15px; animation: rainbow-text 3s linear infinite, shake 0.5s ease-in-out infinite; }
        @keyframes rainbow-text { 0% { color: #ff0000; } 20% { color: #ffff00; } 40% { color: #00ff00; } 60% { color: #00ffff; } 80% { color: #0000ff; } 100% { color: #ff00ff; } }
        @keyframes shake { 0%, 100% { transform: translate(0,0); } 25% { transform: translate(1px, 1px); } 50% { transform: translate(-1px, -1px); } 75% { transform: translate(1px, -1px); } }
        .container { display: flex; flex-grow: 1; height: calc(100vh - 80px); }
        .sidebar { width: 115px; background: rgba(0,0,0,0.8); border-left: 2px solid #00ff00; display: flex; flex-direction: column; padding: 5px; gap: 5px; text-align: center; z-index: 10; }
        .sidebar-title { font-size: 12px; font-weight: bold; color: #fff; margin-bottom: 10px; border-bottom: 1px solid #00ff00; padding-bottom: 5px; }
        .sidebar button { background: #000; border: 2px outset #00ff00; color: #00ff00; padding: 8px 2px; font-size: 11px; cursor: pointer; font-weight: bold; width: 100%; }
        .content-area { flex-grow: 1; position: relative; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; overflow: hidden; padding-top: 10px; }
        .section { display: none; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: flex-start; }
        .active-section { display: flex; }
        .marquee-container { position: fixed; bottom: 0; width: 100%; background: #000080; color: #fff; white-space: nowrap; overflow: hidden; padding: 6px 0; border-top: 2px solid #00ff00; }
        .marquee-text { display: inline-block; padding-right: 100%; animation: marquee-anim 25s linear infinite; }
        @keyframes marquee-anim { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        .choice-box { width: 85%; padding: 15px; margin: 5px; text-align: center; font-size: 16px; font-weight: bold; border: 3px double; cursor: pointer; }
        .blue-choice { background: #000080; border-color: #00f; color: #fff; }
        .red-choice { background: #800000; border-color: #f00; color: #fff; }
        .joke-display { width: 85%; padding: 15px; border: 2px dashed #ffff00; color: #ffff00; font-size: 17px; text-align: center; min-height: 80px; display: flex; align-items: center; background: rgba(0,0,0,0.7); margin-top: 20px; }
        #paint-wrap { width: 95%; height: 40%; background: #fff; border: 2px solid #00ff00; margin-bottom: 5px; cursor: crosshair; position: relative; }
        canvas#canv { width: 100%; height: 100%; touch-action: none; background: #fff; }
        #pacman-canvas { background: #000; border: 2px solid #00f; image-rendering: pixelated; }
        .paint-tools { background: #c0c0c0; display: flex; flex-wrap: wrap; gap: 3px; padding: 5px; border-top: 1px solid #000; justify-content: center; width: 95%; }
        .paint-tools button { color: #000; font-size: 9px; padding: 3px; background: #ddd; border: 1px outset #fff; cursor: pointer; }
        .color-dot { width: 22px; height: 22px; border: 1px solid #000; cursor: pointer; }
        #forum-box { width: 90%; height: 50%; background: rgba(0,0,0,0.9); border: 2px inset #00ff00; overflow-y: auto; padding: 10px; color: #00ff00; font-size: 13px; text-align: right; }
        #name-setup { border: 2px solid #00ff00; padding: 15px; text-align: center; background: #000; margin-top: 20px; }
        input { background: #000; color: #00ff00; border: 1px solid #00ff00; padding: 8px; }
        .pac-controls { display: grid; grid-template-columns: repeat(3, 50px); gap: 10px; margin-top: 15px; }
        .pac-btn { width: 50px; height: 50px; background: #333; color: #fff; border: 2px solid #00ff00; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; user-select: none; }
    </style>
</head>
<body>
    <div class="stars"></div>
    <div class="header-area"></div>
    <div class="container">
        <div class="sidebar">
            <div class="sidebar-title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø©</div>
            <button onclick="show('home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <button onclick="show('q-sec')">Ù„Ùˆ Ø®ÙŠØ±ÙˆÙƒ</button>
            <button onclick="show('joke-sec')">Ø§Ù„Ù†ÙƒØª</button>
            <button onclick="show('pac-sec')">Ø¨Ø§Ùƒ Ù…Ø§Ù†</button>
            <button onclick="show('paint-sec')">Ø§Ù„Ø±Ø³Ø§Ù…</button>
            <button onclick="show('forum-sec')">Ø§Ù„Ù…Ù†ØªØ¯Ù‰ ğŸŒ</button>
            <div class="main-title">ÙØ±ÙØ´ Ù…Ø¹ Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø©</div>
        </div>

        <div class="content-area">
            <div id="home" class="section active-section"><h2>ÙØ±ÙØ´</h2><p>ØªÙ… Ø§Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ 2004</p></div>
            
            <div id="q-sec" class="section">
                <div id="q-blue" class="choice-box blue-choice" onclick="nextQ()"></div>
                <div style="color:#fff">Ø£Ùˆ</div>
                <div id="q-red" class="choice-box red-choice" onclick="nextQ()"></div>
            </div>

            <div id="joke-sec" class="section">
                <div id="joke-box" class="joke-display">Ø§Ø¶ØºØ· Ø§Ù„ØªØ§Ù„ÙŠ Ù„ØªØ¶Ø­Ùƒ</div>
                <button onclick="nextJ()" style="background:#0f0; padding:8px 25px; margin-top:10px; font-weight:bold; cursor:pointer;">Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>

            <div id="pac-sec" class="section">
                <div style="color:yellow; font-weight:bold; font-size:14px; margin-bottom:5px; background:rgba(0,0,0,0.6); padding:4px 10px;">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="pac-score">0</span></div>
                <div style="position:relative;">
                    <canvas id="pacman-canvas" width="280" height="280"></canvas>
                    <div id="go-screen" style="position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); display:none; flex-direction:column; align-items:center; justify-content:center;">
                        <h2 style="color:red;">GAME OVER</h2>
                        <button onclick="initPacman()" style="background:#0f0; padding:10px 20px; font-weight:bold;">Ø¥Ø¹Ø§Ø¯Ø©</button>
                    </div>
                </div>
                <div class="pac-controls">
                    <div></div><div class="pac-btn" onclick="setPacDir('up')">â†‘</div><div></div>
                    <div class="pac-btn" onclick="setPacDir('left')">â†</div><div></div><div class="pac-btn" onclick="setPacDir('right')">â†’</div>
                    <div></div><div class="pac-btn" onclick="setPacDir('down')">â†“</div><div></div>
                </div>
            </div>

            <div id="paint-sec" class="section">
                <div id="paint-wrap"><canvas id="canv"></canvas></div>
                <div class="paint-tools">
                    <button onclick="setTool('pen')">Ù‚Ù„Ù…</button>
                    <button onclick="setTool('eraser')">Ù…Ø­Ø§ÙŠØ©</button>
                    <button onclick="clearC()">Ù…Ø³Ø­</button>
                    <input type="range" id="pw" min="1" max="20" value="3" style="width:40px">
                    <div class="color-dot" style="background:#000" onclick="setCol('#000')"></div>
                    <div class="color-dot" style="background:#f00" onclick="setCol('#f00')"></div>
                    <div class="color-dot" style="background:#00f" onclick="setCol('#00f')"></div>
                </div>
            </div>

            <div id="forum-sec" class="section">
                <div id="name-setup">
                    <div>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø±:</div>
                    <input id="u-name" type="text" maxlength="15">
                    <button onclick="setName()" style="background:#0f0; margin-top:5px; cursor:pointer;">Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ù†ØªØ¯Ù‰</button>
                </div>
                <div id="chat-ui" style="display:none; width:100%; height:100%; flex-direction:column; align-items:center; padding-top:10px;">
                    <div id="forum-box">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„...</div>
                    <div style="display:flex; width:90%; margin-top:5px;">
                        <input id="f-msg" style="flex-grow:1;" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...">
                        <button onclick="postM()" style="background:#0f0; padding: 0 10px; cursor:pointer;">Ø£Ø±Ø³Ù„</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="marquee-container">
        <div class="marquee-text">** Ù…ÙˆÙ‚Ø¹ ÙØ±ÙØ´ Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø© - ÙØ±ÙØ´ ÙŠØ§ Ø¨Ø¹Ø¯ Ø­ÙŠÙŠ - Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ø§Ù„Ø¢Ù† ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹Ø§Ù„Ù… ***</div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†
        const firebaseConfig = { databaseURL: "https://salem-legend-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // 1. Ù„Ùˆ Ø®ÙŠØ±ÙˆÙƒ (Ø±Ø¬Ø¹Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙƒØ§Ù…Ù„Ø©)
        const qs = [{a:"ØªØ·ÙŠØ± Ø¨Ø³ ØªÙ…Ø´ÙŠ Ø¨Ø·ÙŠØ¡ Ø¬Ø¯Ø§Ù‹", b:"ØªØ®ØªÙÙŠ Ø¨Ø³ ØµÙˆØªÙƒ Ø¹Ø§Ù„ÙŠ ÙˆÙØ§Ø¶Ø­Ùƒ"}, {a:"ØªØ§ÙƒÙ„ ØµØ±ØµÙˆØ± Ù…Ù‚Ù„ÙŠ ÙˆÙ…Ù‚Ø±Ù…Ø´", b:"ØªØ´Ø±Ø¨ Ø¨Ù†Ø²ÙŠÙ† Ø¨Ø§Ø±Ø¯ Ù…Ø¹ Ø«Ù„Ø¬"}, {a:"ØªÙƒÙˆÙ† Ø¹Ø¨Ù‚Ø±ÙŠ Ø¨Ø³ ÙÙ‚ÙŠØ± ÙˆØ´Ø­Ø§Øª", b:"ØªÙƒÙˆÙ† ØºØ¨ÙŠ Ø¬Ø¯Ø§Ù‹ Ø¨Ø³ Ø¹Ù†Ø¯Ùƒ Ù…Ù„ÙŠØ§Ø±Ø§Øª"}, {a:"ØªØ±Ø¬Ø¹ Ù„Ù„Ù…Ø§Ø¶ÙŠ ÙˆØªØºÙŠØ± ÙƒÙ„ Ø£ØºÙ„Ø§Ø·Ùƒ", b:"ØªØ±ÙˆØ­ Ù„Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ÙˆØªØ´ÙˆÙ ÙˆØ´ Ø¨ÙŠØµÙŠØ± Ù„Ùƒ"}, {a:"ØªÙƒÙ„Ù… Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª ÙˆØªÙÙ‡Ù… Ø¹Ù„ÙŠÙ‡Ù…", b:"ØªØªØ­Ø¯Ø« ÙƒÙ„ Ù„ØºØ§Øª Ø§Ù„Ø¨Ø´Ø± Ø¨Ø·Ù„Ø§Ù‚Ø©"}, {a:"ØªÙ…Ø´ÙŠ Ø­Ø§ÙÙŠ Ø¹Ù„Ù‰ Ø±Ù…Ù„ Ø­Ø§Ø±Ù‚", b:"ØªÙ„Ø¨Ø³ Ø¬Ø²Ù…Ø© Ø¶ÙŠÙ‚Ø© ØªØ¹ÙˆØ±Ùƒ Ø·ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…"}, {a:"ØªØ¹ÙŠØ´ ÙÙŠ Ø§Ù„Ù‚Ø·Ø¨ Ø§Ù„Ù…ØªØ¬Ù…Ø¯ Ù„Ø­Ø§Ù„Ùƒ", b:"ØªØ¹ÙŠØ´ ÙÙŠ ÙˆØ³Ø· Ø§Ù„ØµØ­Ø±Ø§Ø¡ Ø¨Ø¹Ø² Ø§Ù„ØµÙŠÙ"}, {a:"ØªÙ†Ø§Ù… 20 Ø³Ø§Ø¹Ø© ÙˆØªØµØ­Ù‰ ØªØ¹Ø¨Ø§Ù†", b:"ØªÙ†Ø§Ù… Ø³Ø§Ø¹ØªÙŠÙ† Ø¨Ø³ ÙˆØªÙƒÙˆÙ† Ù†Ø´ÙŠØ·"}, {a:"ØªØ³Ù…Ø¹ Ø£ÙÙƒØ§Ø± Ø§Ù„Ù†Ø§Ø³ Ø§Ù„Ù„ÙŠ Ø­ÙˆÙ„Ùƒ", b:"ØªØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ÙˆÙ‚Øª ÙˆØªÙˆÙ‚ÙÙ‡ Ù…ØªÙ‰ Ù…Ø§ ØªØ¨ÙŠ"}, {a:"ØªØ¹ÙŠØ´ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª Ù„Ù„Ø£Ø¨Ø¯", b:"ØªØ¹ÙŠØ´ Ø¨Ø¯ÙˆÙ† Ù…ÙƒÙŠÙ ÙÙŠ Ø§Ù„Ø¸Ù‡Ø±ÙŠØ©"}];
        let qI=0;
        function nextQ(){ document.getElementById('q-blue').innerText=qs[qI].a; document.getElementById('q-red').innerText=qs[qI].b; qI=(qI+1)%qs.length; }
        nextQ();

        // 2. Ø§Ù„Ù†ÙƒØª (Ø±Ø¬Ø¹ØªÙ‡Ø§ ÙƒØ§Ù…Ù„Ø©)
        const js = ["Ù…Ø­Ø´Ø´ Ø³Ø£Ù„ÙˆÙ‡ Ø§ÙŠØ´ Ø§ØµØ¹Ø¨ Ø´ÙŠ Ø¨Ø§Ù„Ø­ÙŠØ§Ø©ØŸ Ù‚Ø§Ù„ Ø§Ù†Ùƒ ØªØ­Ø¯Ø¯ Ø§Ù„Ø³ÙƒØ³ÙˆÙƒØ© ÙˆØ§Ù†Øª ØªØ§ÙƒÙ„ Ø¹Ù„Ùƒ!", "ØºØ¨ÙŠ Ø±Ù…Ù‰ Ø¬ÙˆØ§Ù„Ù‡ Ù…Ù† Ø§Ù„Ø¨Ù„ÙƒÙˆÙ†Ø© ÙˆÙ„Ù‚Ø§Ù‡ Ù…ÙƒØ³ÙˆØ±.. Ù‚Ø§Ù„ ØºØ±ÙŠØ¨Ø© Ù…Ø¹ Ø§Ù†ÙŠ Ø­Ø§Ø·Ù‡ ÙˆØ¶Ø¹ Ø·ÙŠØ±Ø§Ù†!", "Ù…Ø¯Ø±Ø³ Ø³Ø£Ù„ Ø·Ø§Ù„Ø¨: Ø§Ù„Ø«Ø¹Ù„Ø¨ ÙŠÙˆÙ„Ø¯ ÙˆÙ„Ø§ ÙŠØ¨ÙŠØ¶ØŸ Ù‚Ø§Ù„: Ø§Ù„Ø«Ø¹Ù„Ø¨ Ù…ÙƒØ§Ø± ØªÙˆÙ‚Ø¹ Ù…Ù†Ù‡ Ø£ÙŠ Ø´ÙŠ!", "ÙˆØ§Ø­Ø¯ Ø³Ø£Ù„ Ù…Ø­Ø´Ø´: Ø´Ùˆ Ø§Ø³Ù…Ø§Ø¡ Ø§Ø®ÙˆØ§Ù†ÙƒØŸ Ù‚Ø§Ù„: ÙƒÙ„Ù‡Ù… Ù…Ø­Ù…Ø¯ Ø¥Ù„Ø§ Ø®Ø§Ù„Ø¯ Ø§Ø³Ù…Ù‡ ÙÙŠØµÙ„!", "Ù…Ø­Ø´Ø´ Ø´Ø§Ù Ø¥Ø´Ø§Ø±Ø© Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„ÙˆÙ‚ÙˆÙ.. Ù‚Ø§Ù… Ø§Ù†Ø¨Ø·Ø­ Ø¨Ø§Ù„Ø´Ø§Ø±Ø¹!", "Ø¨Ø®ÙŠÙ„ Ø§Ø­ØªØ±Ù‚ Ø¨ÙŠØªÙ‡ØŒ Ø§ØªØµÙ„ Ø¨Ø§Ù„Ù…Ø·Ø§ÙÙŠ Ø±Ù†Ø© ÙˆØ­Ø¯Ø© ÙˆÙ‚ÙÙ„ Ø¹Ø´Ø§Ù† Ù…Ø§ ÙŠØµØ±Ù!"];
        let jI=0;
        function nextJ(){ document.getElementById('joke-box').innerText=js[jI]; jI=(jI+1)%js.length; }
        nextJ();

        // 3. Ø§Ù„Ù…Ù†ØªØ¯Ù‰ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†
        let userN = "";
        function setName(){ let n=document.getElementById('u-name').value; if(n.trim()){ userN=n; document.getElementById('name-setup').style.display='none'; document.getElementById('chat-ui').style.display='flex'; listenMsgs(); } }
        function postM(){ let m=document.getElementById('f-msg').value; if(m.trim()){ db.ref("messages").push().set({ username: userN, message: m, time: Date.now() }); document.getElementById('f-msg').value=""; } }
        function listenMsgs(){ db.ref("messages").limitToLast(20).on("value", (snap) => { const box = document.getElementById('forum-box'); box.innerHTML = ""; snap.forEach((child) => { const d = child.val(); box.innerHTML += `<div><b style="color:#ff0">${d.username}:</b> ${d.message}</div>`; }); box.scrollTop = box.scrollHeight; }); }

        // 4. Ø§Ù„Ø±Ø³Ø§Ù… ÙˆØ¨Ø§ÙƒÙ…Ø§Ù† (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±)
        function show(id) {
            var sections = document.getElementsByClassName('section');
            for (var i = 0; i < sections.length; i++) sections[i].classList.remove('active-section');
            document.getElementById(id).classList.add('active-section');
            if (id === 'paint-sec') setTimeout(initCanv, 100);
            if (id === 'pac-sec') initPacman();
        }

        // Ø¥ÙƒÙ…Ø§Ù„ Ø¨Ù‚ÙŠØ© Ø¯ÙˆØ§Ù„ Ø§Ù„Ø±Ø³Ù… ÙˆØ§Ù„Ø¨Ø§ÙƒÙ…Ø§Ù† Ø§Ù„ØªÙŠ Ø£Ø±Ø³Ù„ØªÙ‡Ø§ Ø³Ø§Ø¨Ù‚Ø§Ù‹ Ù„ÙŠØ¹Ù…Ù„ Ø§Ù„Ù…Ù„Ù ÙƒØ§Ù…Ù„Ø§Ù‹...
        let canv=document.getElementById('canv'), ctx=canv.getContext('2d'), drawing=false, tool='pen', color='#000';
        function initCanv(){ let box = canv.parentElement; canv.width=box.clientWidth; canv.height=box.clientHeight; ctx.fillStyle="#fff"; ctx.fillRect(0,0,canv.width,canv.height); }
        function start(e){ drawing=true; ctx.beginPath(); }
        function draw(e){ if(!drawing) return; let rect=canv.getBoundingClientRect(); let x=(e.clientX||e.touches[0].clientX)-rect.left; let y=(e.clientY||e.touches[0].clientY)-rect.top; ctx.strokeStyle=(tool=='eraser'?'#fff':color); ctx.lineWidth=document.getElementById('pw').value; ctx.lineTo(x,y); ctx.stroke(); }
        canv.onmousedown=start; canv.onmousemove=draw; window.onmouseup=()=>drawing=false;
        canv.ontouchstart=start; canv.ontouchmove=draw;
        function setTool(t){tool=t;} function setCol(c){color=c; tool='pen';} function clearC(){ctx.fillStyle="#fff"; ctx.fillRect(0,0,canv.width,canv.height);}
        
        // Ø¨Ø§ÙƒÙ…Ø§Ù† Ø¨Ø³ÙŠØ· Ù„Ù„ØªØ´ØºÙŠÙ„
        function initPacman(){ let pc=document.getElementById('pacman-canvas'), pctx=pc.getContext('2d'); pctx.fillStyle="#000"; pctx.fillRect(0,0,280,280); pctx.fillStyle="yellow"; pctx.arc(140,140,15,0,Math.PI*2); pctx.fill(); }
    </script>
</body>
</html>
